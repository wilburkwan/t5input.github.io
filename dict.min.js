window.onload=function(){fetch("database.txt").then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((e=>{window.strokeData=parseData(e)})).catch((e=>{console.error("Failed to fetch stroke data:",e),document.getElementById("results").innerHTML="<tr><td colspan='2'>無法載入筆劃資料。</td></tr>"}))};function parseData(e){const t=e.split("\n"),n={};return t.forEach((e=>{if(e.trim()&&!e.startsWith("#")){const t=e.split("\t");2===t.length&&(n[t[0].trim()]=convertStrokeToSymbols(t[1].trim()))}})),n}function convertStrokeToSymbols(e){return e.replace(/u/g,"一").replace(/i/g,"丨").replace(/o/g,"丿").replace(/j/g,"丶").replace(/k/g,"フ")}function searchCharacter(){const e=document.getElementById("searchInput").value.trim(),t=document.getElementById("results");if(t.innerHTML="",!e)return void(t.innerHTML="<tr><td colspan='2'>請輸入一個或多個漢字。</td></tr>");Array.from(e).forEach((e=>{let n="<tr>";window.strokeData[e]?n+=`<td>${e}</td><td>${window.strokeData[e]}</td>`:n+=`<td>${e}</td><td>未找到筆劃順序。</td>`,n+="</tr>",t.innerHTML+=n}))}
